type OwnershipTransferred @entity(immutable: true) {
	id: ID!
	previousOwner: Bytes! # address
	newOwner: Bytes! # address
	blockNumber: BigInt!
	blockTimestamp: BigInt!
	transactionHash: Bytes!
}

type Protocol @entity {
  id: ID!
  userCount: Int!
  protocolRevenue: BigDecimal!
  accountRevenue: BigDecimal!
  tradeVolume: BigDecimal!
  totalTrades: Int!
}

type Subject @entity {
	id: ID!
	holdersCount: BigInt!
	keySupply: BigInt!
	holders: [SubjectHolder!]! @derivedFrom(field: "subject")
}

type Holder @entity {
	id: ID!
	subjects: [SubjectHolder!]! @derivedFrom(field: "holder")
	holdingsTotal: BigInt!
}

type SubjectHolder @entity {
	id: ID!
	subject: Subject!
	holder: Holder!
	count: BigInt! # 持有者持有的数量
}

type Trade @entity(immutable: true) {
	id: ID!
  	trader: Bytes! # address
  	subject: Bytes! # address
  	isBuy: Boolean! # bool
  	shareAmount: BigInt! # uint256
  	ethAmount: BigInt! # uint256
  	protocolEthAmount: BigInt! # uint256
  	subjectEthAmount: BigInt! # uint256
  	supply: BigInt! # uint256
  	blockNumber: BigInt!
  	blockTimestamp: BigInt!
  	transactionHash: Bytes!
}

